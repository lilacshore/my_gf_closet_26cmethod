<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ§£ 26åº¦ç©¿è¡£æ³•åˆ™åŠ©æ‰‹</title>
    <!-- å¼•å…¥ Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- å¼•å…¥ Tailwind CSS (ç”¨äºå¿«é€Ÿç¾åŒ–) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ Google Fonts å­—ä½“ -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans SC', sans-serif; background-color: #fdf2f8; } /* ç²‰è‰²ç³»èƒŒæ™¯ */
        .item-card { transition: all 0.2s; }
        .item-card:active { transform: scale(0.95); }
        /* éšè—æ»šåŠ¨æ¡ä½†ä¿ç•™åŠŸèƒ½ */
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="text-gray-700">

<div id="app" class="max-w-md mx-auto min-h-screen bg-white shadow-2xl flex flex-col relative">
    
    <!-- é¡¶éƒ¨ï¼šè¾“å…¥ä¸ç›®æ ‡ -->
    <div class="bg-gradient-to-b from-pink-300 to-pink-100 p-6 rounded-b-[30px] shadow-md z-10 sticky top-0">
        <h1 class="text-xl font-bold text-pink-800 text-center mb-4">ğŸ§¥ 26Â°C ç©¿è¡£æ³•åˆ™è®¡ç®—å™¨</h1>
        
        <div class="bg-white/80 backdrop-blur rounded-2xl p-4 shadow-sm">
            <div class="flex justify-between items-center mb-2">
                <label class="text-sm font-bold text-gray-500">å½“å‰æ°”æ¸© (Â°C)</label>
                <span class="text-xs text-pink-500 bg-pink-100 px-2 py-1 rounded-full">ç›®æ ‡: 26Â°C</span>
            </div>
            <div class="flex items-center gap-4">
                <input type="number" v-model="temperature" @input="calculateTarget" 
                       class="w-full text-3xl font-bold text-center border-b-2 border-pink-300 focus:border-pink-500 outline-none bg-transparent py-2" 
                       placeholder="è¾“å…¥æ°”æ¸©">
            </div>
            
            <div class="mt-4 pt-4 border-t border-gray-200 flex justify-between items-center">
                <div>
                    <p class="text-xs text-gray-500">éœ€è¦è¡¥é½ä¿æš–åº¦</p>
                    <p class="text-2xl font-bold text-indigo-600">{{ targetWarmth > 0 ? targetWarmth : 0 }}Â°C</p>
                </div>
                <div class="text-right">
                    <p class="text-xs text-gray-500">å½“å‰å·²é€‰</p>
                    <p class="text-2xl font-bold" :class="statusColor">{{ currentWarmth }}Â°C</p>
                </div>
            </div>
        </div>

        <!-- çŠ¶æ€æç¤ºæ¡ -->
        <div v-if="temperature" class="mt-3 text-center text-sm font-medium py-2 px-4 rounded-xl transition-colors duration-300" :class="statusBg">
            {{ statusMessage }}
        </div>
    </div>

    <!-- ä¸­é—´ï¼šè¡£ç‰©é€‰æ‹©åŒº -->
    <div class="flex-1 p-4 overflow-y-auto hide-scrollbar pb-32">
        <div v-for="(items, category) in groupedClothes" :key="category" class="mb-6">
            <h3 class="text-sm font-bold text-gray-400 uppercase tracking-wider mb-3 ml-1">{{ categoryNames[category] }}</h3>
            <div class="grid grid-cols-3 gap-3">
                <div v-for="item in items" :key="item.name" 
                     @click="toggleItem(item)"
                     class="item-card p-3 rounded-xl border text-center cursor-pointer select-none flex flex-col items-center justify-center h-24 relative"
                     :class="item.selected ? 'bg-pink-500 border-pink-600 text-white shadow-lg shadow-pink-200' : 'bg-gray-50 border-gray-100 text-gray-600'">
                    
                    <!-- é€‰ä¸­æ—¶çš„å°å‹¾å‹¾ -->
                    <div v-if="item.selected" class="absolute top-1 right-1 bg-white text-pink-500 rounded-full w-4 h-4 flex items-center justify-center text-[10px]">âœ“</div>
                    
                    <span class="text-2xl mb-1">{{ item.icon }}</span>
                    <span class="text-xs font-medium truncate w-full">{{ item.name }}</span>
                    <span class="text-xs opacity-80 mt-1">+{{ item.warmth }}Â°C</span>
                </div>
            </div>
        </div>
    </div>

    <!-- åº•éƒ¨ï¼šé‡ç½®æŒ‰é’® -->
    <div class="absolute bottom-6 left-0 right-0 px-6 flex justify-center z-20 pointer-events-none">
        <button @click="reset" v-if="currentWarmth > 0" 
                class="pointer-events-auto bg-white text-gray-500 hover:text-pink-500 shadow-lg border border-gray-200 px-6 py-2 rounded-full text-sm font-bold transition-all transform hover:scale-105 flex items-center gap-2">
            <span>ğŸ”„</span> ä¸€é”®é‡ç½®æ­é…
        </button>
    </div>

</div>

<script>
    const { createApp, ref, computed, reactive } = Vue;

    createApp({
        setup() {
            // 1. æ ¸å¿ƒæ•°æ®
            const temperature = ref(''); // å½“å‰æ°”æ¸©
            
            // æ•°æ®åº“ï¼šå¢åŠ äº† icon è®©ç•Œé¢æ›´å¯çˆ±
            const clothesDB = [
                { name: "Tæ¤", warmth: 1, category: "top", icon: "ğŸ‘•" },
                { name: "è¡¬è¡«", warmth: 2, category: "top", icon: "ğŸ‘”" },
                { name: "è–„é’ˆç»‡è¡«", warmth: 3, category: "mid", icon: "ğŸ§¶" },
                { name: "å«è¡£", warmth: 4, category: "mid", icon: "ğŸ‘˜" },
                { name: "ç¾Šæ¯›è¡«", warmth: 7, category: "mid", icon: "ğŸ‘" },
                { name: "é£è¡£", warmth: 5, category: "outer", icon: "ğŸ§¥" },
                { name: "è½»è–„ç¾½ç»’", warmth: 9, category: "outer", icon: "â˜ï¸" },
                { name: "åšç¾½ç»’æœ", warmth: 15, category: "outer", icon: "â›„" },
                { name: "è–„å…‰è…¿ç¥å™¨", warmth: 4, category: "bottom", icon: "ğŸ¦µ" },
                { name: "åšå…‰è…¿ç¥å™¨", warmth: 7, category: "bottom", icon: "ğŸ‘–" },
                { name: "ç‰›ä»”è£¤", warmth: 3, category: "bottom", icon: "ğŸ‘–" },
                { name: "å›´å·¾", warmth: 3, category: "accessory", icon: "ğŸ§£" },
                { name: "å¸½å­", warmth: 2, category: "accessory", icon: "ğŸ§¢" },
                { name: "æ™®é€šè¢œå­", warmth: 1, category: "shoe", icon: "ğŸ§¦" },
                { name: "ç¾Šæ¯›è¢œ", warmth: 2, category: "shoe", icon: "ğŸ‘£" }
            ];

            // å°†æ•°æ®åº“è½¬æ¢ä¸ºå“åº”å¼çŠ¶æ€ï¼Œå¹¶æ·»åŠ  selected å±æ€§
            const clothes = reactive(clothesDB.map(c => ({ ...c, selected: false })));

            // åˆ†ç±»æ˜ å°„åç§°
            const categoryNames = {
                top: "å†…æ­ / ä¸Šè£…",
                mid: "ä¸­å±‚ä¿æš–",
                outer: "å¤–å¥—",
                bottom: "ä¸‹è£…",
                accessory: "é…é¥°",
                shoe: "é‹è¢œ"
            };

            // 2. è®¡ç®—å±æ€§
            // è®¡ç®—ç›®æ ‡ä¿æš–åº¦
            const targetWarmth = computed(() => {
                if (temperature.value === '') return 0;
                const target = 26 - parseInt(temperature.value);
                return target > 0 ? target : 0;
            });

            // è®¡ç®—å½“å‰å·²é€‰ä¿æš–åº¦
            const currentWarmth = computed(() => {
                return clothes.filter(c => c.selected).reduce((sum, item) => sum + item.warmth, 0);
            });

            // æŒ‰åˆ†ç±»åˆ†ç»„æ•°æ®
            const groupedClothes = computed(() => {
                const groups = {};
                // æŒ‰ç…§ç‰¹å®šé¡ºåºæ’åˆ—
                const order = ['top', 'mid', 'outer', 'bottom', 'accessory', 'shoe'];
                order.forEach(key => groups[key] = []);
                
                clothes.forEach(item => {
                    if (groups[item.category]) {
                        groups[item.category].push(item);
                    }
                });
                return groups;
            });

            // 3. çŠ¶æ€åé¦ˆé€»è¾‘ (æ ¸å¿ƒä½“éªŒç‚¹)
            const statusMessage = computed(() => {
                if (temperature.value === '') return "è¯·å…ˆè¾“å…¥ä»Šå¤©çš„æ°”æ¸©å“¦~ ğŸ‘‡";
                
                const diff = currentWarmth.value - targetWarmth.value;
                
                if (Math.abs(diff) <= 1) return "ğŸ‰ å®Œç¾ï¼è¿™å°±æ˜¯ä»Šå¤©çš„æœ€ä½³æ­é…ï¼";
                if (diff > 1 && diff <= 4) return "ğŸ”¥ ç¨å¾®æœ‰ç‚¹æš–å’Œï¼Œæ€•å†·çš„è¯æ­£å¥½ï¼";
                if (diff > 4) return "ğŸ¥µ å¯èƒ½ä¼šçƒ­å“¦ï¼Œè¦ä¸è¦å‡ä¸€ä»¶ï¼Ÿ";
                if (diff < 0 && diff >= -2) return "â„ï¸ ç¨å¾®æœ‰ç‚¹å‡‰ï¼Œå»ºè®®å†åŠ ä¸ªé…é¥°ï¼Ÿ";
                if (diff < -2) return "ğŸ¥¶ è¿˜è¦å†å¤šç©¿ç‚¹ï¼ä¼šæ„Ÿå†’çš„ï¼";
                return "è¯·é€‰æ‹©è¡£ç‰©è¿›è¡Œæ­é…";
            });

            const statusColor = computed(() => {
                if (temperature.value === '') return "text-gray-400";
                const diff = currentWarmth.value - targetWarmth.value;
                if (Math.abs(diff) <= 1) return "text-green-500"; // å®Œç¾
                if (diff > 0) return "text-orange-500"; // çƒ­
                return "text-blue-500"; // å†·
            });

            const statusBg = computed(() => {
                if (temperature.value === '') return "bg-gray-100 text-gray-500";
                const diff = currentWarmth.value - targetWarmth.value;
                if (Math.abs(diff) <= 1) return "bg-green-100 text-green-600";
                if (diff > 1) return "bg-orange-100 text-orange-600";
                if (diff < 0) return "bg-blue-100 text-blue-600";
                return "bg-gray-100";
            });

            // 4. æ–¹æ³•
            const toggleItem = (item) => {
                item.selected = !item.selected;
            };

            const reset = () => {
                clothes.forEach(c => c.selected = false);
            };

            const calculateTarget = () => {
                // è¾“å…¥æ—¶è‡ªåŠ¨è§¦å‘é‡ç½®æ¯”è¾ƒå¥½ï¼Œæˆ–è€…ä¿ç•™ä¸Šæ¬¡æ­é…ï¼Œè¿™é‡Œä¿ç•™æ­é…æ›´äººæ€§åŒ–
            };

            return {
                temperature,
                clothes,
                groupedClothes,
                categoryNames,
                targetWarmth,
                currentWarmth,
                toggleItem,
                reset,
                statusMessage,
                statusColor,
                statusBg
            };
        }
    }).mount('#app');
</script>
</body>
</html>
